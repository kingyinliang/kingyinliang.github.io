<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NPM | kingyingliang</title>
    <meta name="description" content="kingyingliang的个人博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.2868158a.css" as="style"><link rel="preload" href="/assets/js/app.8b298d71.js" as="script"><link rel="preload" href="/assets/js/3.1047f7fc.js" as="script"><link rel="preload" href="/assets/js/1.e9036eeb.js" as="script"><link rel="preload" href="/assets/js/31.8bdbfc59.js" as="script"><link rel="prefetch" href="/assets/js/10.faea7ed6.js"><link rel="prefetch" href="/assets/js/11.a1eb7cb1.js"><link rel="prefetch" href="/assets/js/12.a94480e8.js"><link rel="prefetch" href="/assets/js/13.78aa3210.js"><link rel="prefetch" href="/assets/js/14.873f66c8.js"><link rel="prefetch" href="/assets/js/15.90e4a351.js"><link rel="prefetch" href="/assets/js/16.e9797b58.js"><link rel="prefetch" href="/assets/js/17.ae73df78.js"><link rel="prefetch" href="/assets/js/18.63201470.js"><link rel="prefetch" href="/assets/js/19.74ca95e4.js"><link rel="prefetch" href="/assets/js/20.ca975c1c.js"><link rel="prefetch" href="/assets/js/21.03ae9a37.js"><link rel="prefetch" href="/assets/js/22.30d540c3.js"><link rel="prefetch" href="/assets/js/23.4c7ee792.js"><link rel="prefetch" href="/assets/js/24.c286385e.js"><link rel="prefetch" href="/assets/js/25.3dcf4fb6.js"><link rel="prefetch" href="/assets/js/26.136db144.js"><link rel="prefetch" href="/assets/js/27.7f89bba4.js"><link rel="prefetch" href="/assets/js/28.5f2690f1.js"><link rel="prefetch" href="/assets/js/29.e455dd30.js"><link rel="prefetch" href="/assets/js/30.9b5791ce.js"><link rel="prefetch" href="/assets/js/32.c6d259c7.js"><link rel="prefetch" href="/assets/js/33.a52d22d8.js"><link rel="prefetch" href="/assets/js/34.4c6deef9.js"><link rel="prefetch" href="/assets/js/35.b974d0f2.js"><link rel="prefetch" href="/assets/js/36.75dbacb4.js"><link rel="prefetch" href="/assets/js/4.42ba4794.js"><link rel="prefetch" href="/assets/js/5.903262c0.js"><link rel="prefetch" href="/assets/js/6.029a538f.js"><link rel="prefetch" href="/assets/js/7.43e76bc3.js"><link rel="prefetch" href="/assets/js/8.cdc6e064.js"><link rel="prefetch" href="/assets/js/9.21bfb851.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2868158a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.png" alt="kingyingliang" class="logo"> <span class="site-name">kingyingliang</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>规范</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/standard/HTML.html" class="nav-link"><i class="iconfont undefined"></i>
  HTML
</a></li><li class="dropdown-subitem"><a href="/standard/CSS.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-subitem"><a href="/standard/JS.html" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/standard/GIT.html" class="nav-link"><i class="iconfont undefined"></i>
  GIT
</a></li><li class="dropdown-subitem"><a href="/standard/TEST.html" class="nav-link"><i class="iconfont undefined"></i>
  测试
</a></li><li class="dropdown-subitem"><a href="/standard/workflow.html" class="nav-link"><i class="iconfont undefined"></i>
  工作流
</a></li><li class="dropdown-subitem"><a href="/standard/wepy.html" class="nav-link"><i class="iconfont undefined"></i>
  小程序
</a></li></ul></li><li class="dropdown-item"><h4>技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Technology/Nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nuxt
</a></li><li class="dropdown-subitem"><a href="/Technology/Nesxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nesxt微服务
</a></li><li class="dropdown-subitem"><a href="/Technology/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/Technology/Koa/Koa.html" class="nav-link"><i class="iconfont undefined"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/Technology/React/React.html" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-subitem"><a href="/Technology/Express/Express.html" class="nav-link"><i class="iconfont undefined"></i>
  Express
</a></li><li class="dropdown-subitem"><a href="/Technology/Electron/Electron.html" class="nav-link"><i class="iconfont undefined"></i>
  Electron
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      读书会
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/readingParty/reconsitution/" class="nav-link"><i class="iconfont undefined"></i>
  重构
</a></li><li class="dropdown-item"><!----> <a href="/readingParty/" class="nav-link"><i class="iconfont undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/share/" class="nav-link"><i class="iconfont reco-other"></i>
  分享
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-three"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></li><li class="dropdown-item"><!----> <a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/category/Tenchnology.html" class="nav-link"><i class="iconfont reco-category"></i>
  分类
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kingyinliang" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>规范</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/standard/HTML.html" class="nav-link"><i class="iconfont undefined"></i>
  HTML
</a></li><li class="dropdown-subitem"><a href="/standard/CSS.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-subitem"><a href="/standard/JS.html" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/standard/GIT.html" class="nav-link"><i class="iconfont undefined"></i>
  GIT
</a></li><li class="dropdown-subitem"><a href="/standard/TEST.html" class="nav-link"><i class="iconfont undefined"></i>
  测试
</a></li><li class="dropdown-subitem"><a href="/standard/workflow.html" class="nav-link"><i class="iconfont undefined"></i>
  工作流
</a></li><li class="dropdown-subitem"><a href="/standard/wepy.html" class="nav-link"><i class="iconfont undefined"></i>
  小程序
</a></li></ul></li><li class="dropdown-item"><h4>技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Technology/Nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nuxt
</a></li><li class="dropdown-subitem"><a href="/Technology/Nesxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nesxt微服务
</a></li><li class="dropdown-subitem"><a href="/Technology/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/Technology/Koa/Koa.html" class="nav-link"><i class="iconfont undefined"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/Technology/React/React.html" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-subitem"><a href="/Technology/Express/Express.html" class="nav-link"><i class="iconfont undefined"></i>
  Express
</a></li><li class="dropdown-subitem"><a href="/Technology/Electron/Electron.html" class="nav-link"><i class="iconfont undefined"></i>
  Electron
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      读书会
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/readingParty/reconsitution/" class="nav-link"><i class="iconfont undefined"></i>
  重构
</a></li><li class="dropdown-item"><!----> <a href="/readingParty/" class="nav-link"><i class="iconfont undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/share/" class="nav-link"><i class="iconfont reco-other"></i>
  分享
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-three"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></li><li class="dropdown-item"><!----> <a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/category/Tenchnology.html" class="nav-link"><i class="iconfont reco-category"></i>
  分类
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kingyinliang" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/standard/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/standard/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/standard/JS.html" class="sidebar-link">JS</a></li><li><a href="/standard/GIT.html" class="sidebar-link">git</a></li><li><a href="/standard/TEST.html" class="sidebar-link">测试策略</a></li><li><a href="/standard/workflow.html" class="sidebar-link">工作流</a></li><li><a href="/standard/wepy.html" class="sidebar-link">小程序</a></li><li><a href="/standard/release.html" class="sidebar-link">发布规范</a></li><li><a href="/standard/npm.html" class="active sidebar-link">NPM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard/npm.html#npm-包管理规范" class="sidebar-link">NPM 包管理规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard/npm.html#package-json" class="sidebar-link">package.json</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#modules" class="sidebar-link">modules</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#测试" class="sidebar-link">测试</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#demo" class="sidebar-link">DEMO</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#readme-md" class="sidebar-link">README.md</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#发布" class="sidebar-link">发布</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#依赖包更新与检测" class="sidebar-link">依赖包更新与检测</a></li></ul></li><li class="sidebar-sub-header"><a href="/standard/npm.html#npm-私服搭建" class="sidebar-link">npm 私服搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard/npm.html#verdaccio" class="sidebar-link">Verdaccio</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#搭建过程" class="sidebar-link">搭建过程</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#启动" class="sidebar-link">启动</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#创建用户" class="sidebar-link">创建用户</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#与私服连接" class="sidebar-link">与私服连接</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#安装nrm" class="sidebar-link">安装nrm</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#发布包" class="sidebar-link">发布包</a></li><li class="sidebar-sub-header"><a href="/standard/npm.html#同步项目所需要的包到verdaccio中" class="sidebar-link">同步项目所需要的包到verdaccio中</a></li></ul></li></ul></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>NPM</h1> <hr> <div data-v-cf5504f4><i class="iconfont reco-account" data-v-cf5504f4><span data-v-cf5504f4>kingyinliang</span></i> <i class="iconfont reco-date" data-v-cf5504f4><span data-v-cf5504f4>2019-1-7</span></i> <!----> <i class="iconfont reco-tag tags" data-v-cf5504f4><span class="tag-item" data-v-cf5504f4>
      NPM
    </span></i></div></div> <div class="content__default"><h2 id="npm-包管理规范"><a href="#npm-包管理规范" aria-hidden="true" class="header-anchor">#</a> NPM 包管理规范</h2> <p>为了方便管理和维护组织内越来越多的 npm 公用包，以及良好的生态环境，特制定此规范</p> <h3 id="package-json"><a href="#package-json" aria-hidden="true" class="header-anchor">#</a> package.json</h3> <p><code>package.json</code> 基础模板</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;my_package&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;awsome package&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;repository&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;url&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://github.com/ashleygwilliams/my_package.git&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;bugs&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;url&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://github.com/ashleygwilliams/my_package/issues&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;homepage&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://github.com/ashleygwilliams/my_package&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="name"><a href="#name" aria-hidden="true" class="header-anchor">#</a> name</h4> <p>必须使用小写，多词之间使用 连字符 - 间隔<br>
并且必须满足以下条件</p> <ul><li>唯一的</li> <li>描述性质的</li> <li>非攻击性词汇</li> <li>非商标类词汇</li> <li>非别人拥有的名字</li> <li>非已有包名的简写</li> <li>非已有包名的类似名字混搅</li></ul> <p>示例：<code>uploader</code>, <code>milk-finder</code>, <code>one-to-three</code></p> <h4 id="description"><a href="#description" aria-hidden="true" class="header-anchor">#</a> description</h4> <p>包的简单描述</p> <h4 id="version"><a href="#version" aria-hidden="true" class="header-anchor">#</a> version</h4> <p>包版本号，默认为 1.0.0</p> <ul><li>1.0.1 通常为 bug fix</li> <li>1.1.0 新的功能，但向后兼容</li> <li>2.0.0 新的功能，不再向后兼容</li></ul> <h4 id="main"><a href="#main" aria-hidden="true" class="header-anchor">#</a> main</h4> <p>默认入口，默认为根目录 <code>index.js</code></p> <blockquote><p>全局包需要在 index.js 的第一行添加 #!/usr/bin/env node 否则 windows 系统中可能不会以 nodejs 去执行入口</p></blockquote> <h4 id="scripts"><a href="#scripts" aria-hidden="true" class="header-anchor">#</a> scripts</h4> <p>快捷的脚本地址</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm run test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="repository"><a href="#repository" aria-hidden="true" class="header-anchor">#</a> repository</h4> <p>包的仓库地址</p> <h4 id="keywords"><a href="#keywords" aria-hidden="true" class="header-anchor">#</a> keywords</h4> <p>包的关键字，其他开发者在 <code>npmjs.org</code> 查看你的包时以标签形式展示</p> <h4 id="author"><a href="#author" aria-hidden="true" class="header-anchor">#</a> author</h4> <p>包作者<br>
示例： Your Name email@example.com (http://example.com)</p> <h4 id="license"><a href="#license" aria-hidden="true" class="header-anchor">#</a> license</h4> <p>代码许可标识，默认 <code>ISC</code></p> <h4 id="bugs"><a href="#bugs" aria-hidden="true" class="header-anchor">#</a> bugs</h4> <p>使用过程中遇到 bug 时，提交或者解决问题的地址</p> <h4 id="bin"><a href="#bin" aria-hidden="true" class="header-anchor">#</a> bin</h4> <p>配置全局安装包执行的命令，及执行文件地址</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;index.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>全局安装后，可以在命令行 xxx 执行到对应文件</p> <h4 id="dependencies"><a href="#dependencies" aria-hidden="true" class="header-anchor">#</a> dependencies</h4> <p>生产环境需要的依赖包</p> <blockquote><p>提示：仅限配置生产环境需要的依赖, 开发&amp;测试环境需要的依赖包配置到 <code>devDependencies</code></p></blockquote> <h4 id="devdependencies"><a href="#devdependencies" aria-hidden="true" class="header-anchor">#</a> devDependencies</h4> <p>测试环境用到的依赖包</p> <h3 id="modules"><a href="#modules" aria-hidden="true" class="header-anchor">#</a> modules</h3> <p>应考虑兼容到 <code>CommonJS</code> <code>AMD</code> <code>CMD</code> 以及 <code>浏览器</code> 直接引入使用</p> <h3 id="测试"><a href="#测试" aria-hidden="true" class="header-anchor">#</a> 测试</h3> <p>必须包含所有功能的测试在 <code>test</code> 文件夹中</p> <h3 id="demo"><a href="#demo" aria-hidden="true" class="header-anchor">#</a> DEMO</h3> <h3 id="readme-md"><a href="#readme-md" aria-hidden="true" class="header-anchor">#</a> README.md</h3> <p>为了帮助其他开发人员, 使用你的包时有更好的体验, 推荐在根目录添加 <code>readme.md</code> 描述如何安装、配置和使用你的包</p> <h3 id="发布"><a href="#发布" aria-hidden="true" class="header-anchor">#</a> 发布</h3> <p>发布时需设置 <code>域</code> 名称
个人发布使用自己姓名全拼做域名<code>@&lt;name&gt;</code></p> <div class="language-text line-numbers-mode"><pre class="language-text"><code># 设置包域名为姓名全拼
npm init --scope=@zhangkangxin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>项目组发布以项目组名 <code>@&lt;project-name&gt;</code> 作为域名</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code># 设置包域名为项目名称 @arch
npm init --scope=@arch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>非项目组的包名应以部门 <code>@&lt;depart-name&gt;</code> 作为域名</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code># 设置包域名为部门 @financial
npm init --scope=@financial
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行发布</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm publish --access public
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="warning custom-block"><p>开发人员应避免包中含敏感信息。例: npm 账号密码、私有 keys 、私人资料、信用卡信息</p></div> <h3 id="依赖包更新与检测"><a href="#依赖包更新与检测" aria-hidden="true" class="header-anchor">#</a> 依赖包更新与检测</h3> <p>定期使用 <code>npm audit</code> 命令检测 <code>package.json</code> 依赖包是否有漏洞</p> <h2 id="npm-私服搭建"><a href="#npm-私服搭建" aria-hidden="true" class="header-anchor">#</a> npm 私服搭建</h2> <h3 id="verdaccio"><a href="#verdaccio" aria-hidden="true" class="header-anchor">#</a> Verdaccio</h3> <blockquote><p>Verdaccio是一个简单的，零配置所需的本地私有npm注册表。不需要整个数据库就可以开始使用！Verdaccio开箱即用，拥有自己的小型数据库，能够代理其他注册表（例如npmjs.org），一路缓存下载的模块。</p></blockquote> <h3 id="搭建过程"><a href="#搭建过程" aria-hidden="true" class="header-anchor">#</a> 搭建过程</h3> <h4 id="安装verdaccio"><a href="#安装verdaccio" aria-hidden="true" class="header-anchor">#</a> 安装verdaccio</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>$ npm install --global verdaccio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="配置文件"><a href="#配置文件" aria-hidden="true" class="header-anchor">#</a> 配置文件</h4> <p>verdaccio 的特点是，你在哪个目录运行，它的就会在对应的目录下创建自己的文件。目录下默认有两个文件：config.yaml和storage，htpasswd 是添加用户之后自动创建的；
由于第一次启动默认的config.xml文件是从原始文件default.yaml拷贝而来，可先修改verdaccio 原始的default.yaml。
地址：verdaccio 安装目录/conf/ default.yaml。<br>
打开默认启动的config.yaml文件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>#设置<span class="token constant">NPM</span>包的存放目录
storage<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>storage
#配置<span class="token constant">WEB</span> <span class="token constant">UI</span>界面
web <span class="token punctuation">:</span>
  title <span class="token punctuation">:</span> ‘搭建私有<span class="token constant">NPM</span>’
  #logo <span class="token punctuation">:</span> logo<span class="token punctuation">.</span>png
#设置用户验证的文件。
auth<span class="token punctuation">:</span>
  htpasswd<span class="token punctuation">:</span>
  file<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>htpasswd
  max_users<span class="token punctuation">:</span> <span class="token number">1000</span>   #默认为<span class="token number">1000</span>，改为<span class="token operator">-</span><span class="token number">1</span>，禁止注册
<span class="token function">#设置其它的npm注册源</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span>
uplinks<span class="token punctuation">:</span>
  npmjs<span class="token punctuation">:</span>
  url<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token regex">/registry.npmjs.org/</span> 
#配置权限管理
packages<span class="token punctuation">:</span>
   ‘@<span class="token operator">/</span>’<span class="token punctuation">:</span>
  #表示哪一类用户可以对匹配的项目进行安装 【$all 表示所有人都可以执行对应的操作，$authenticated 表示只有通过验证的人可以执行对应操作，$anonymous 表示只有匿名者可以进行对应操作（通常无用）】
  access<span class="token punctuation">:</span> $all
  #表示哪一类用户可以对匹配的项目进行发布
  publish<span class="token punctuation">:</span> $authenticated
‘<span class="token operator">*</span>’<span class="token punctuation">:</span>
  #表示哪一类用户可以对匹配的项目进行安装
  access<span class="token punctuation">:</span> $all
  #表示哪一类用户可以对匹配的项目进行发布
  publish<span class="token punctuation">:</span> $authenticated
  # 如果一个npm包不存在，它会去询问设置的代理。
  proxy<span class="token punctuation">:</span> npmjs
#日志输出设置
logs<span class="token punctuation">:</span>
   <span class="token operator">-</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> stdout<span class="token punctuation">,</span> format<span class="token punctuation">:</span> pretty<span class="token punctuation">,</span> level<span class="token punctuation">:</span> http<span class="token punctuation">}</span>
  #<span class="token operator">-</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> file<span class="token punctuation">,</span> path<span class="token punctuation">:</span> verdaccio<span class="token punctuation">.</span>log<span class="token punctuation">,</span> level<span class="token punctuation">:</span> info<span class="token punctuation">}</span>
#修改监听的端口
listen<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">:</span><span class="token number">4873</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><div class="language-text line-numbers-mode"><pre class="language-text"><code>firewall-cmd --state                # 先查看防火墙状态，
service firewalld start              # 开启防火墙:
firewall-cmd --zone=public --add-port=4873/tcp –permanent  #开放4873端口
firewall-cmd --reload              #重新载入
firewall-cmd --zone=public --query-port=4873/tcp    #查看是否添加成功
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>修改完了配置，到verdaccio目录下通过$ verdaccio -c config.yaml更新一下</p> <h3 id="启动"><a href="#启动" aria-hidden="true" class="header-anchor">#</a> 启动</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>$ verdaccio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="pm2守护verdaccio进程"><a href="#pm2守护verdaccio进程" aria-hidden="true" class="header-anchor">#</a> pm2守护verdaccio进程</h4> <p>利用第一种方法虽然可以正常启动和使用verdaccio，但不建议用这种方式启动verdaccio，我们可以用pm2来使用pm2对verdaccio进程进行托管启动。<br>
安装pm2并使用pm2启动verdaccio，使用pm2托管的进程可以保证进程永远是活着的，尝试通过kill -9去杀verdaccio的进程发现杀了之后又自动启起来。推荐使用此种方式启动verdaccio.
安装pm2</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install -g pm2 --unsafe-perm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用pm2启动verdaccio</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>pm2 start verdaccio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看pm2 守护下的进程verdaccio的实时日志</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>pm2 show verdaccio  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过这个命令我们可以从下图中看到所有verdaccio的所有信息，打开 out log path查看进程输出日志,出现错误时候也可以打开error log来查看错误日志。</p> <h3 id="创建用户"><a href="#创建用户" aria-hidden="true" class="header-anchor">#</a> 创建用户</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm adduser --registry /* ip */
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后我们在ip地址上面直接点Login就可以登陆了
这里，如果我们已经装了nrm ，可以简便上面这句操作：我们直接利用nrm把镜像源切换到我们的<code>ip/npm</code>上面，然后$ <code>npm adduser</code>就可以了</p> <h3 id="与私服连接"><a href="#与私服连接" aria-hidden="true" class="header-anchor">#</a> 与私服连接</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm set registry http://192.168.XX.50：4873 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="安装nrm"><a href="#安装nrm" aria-hidden="true" class="header-anchor">#</a> 安装nrm</h3> <p>nrm是 npm registry 管理工具, 能够查看和切换当前使用的registry。不安装也可以，安装会更高效</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install -g nrm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加私服地址到nrm管理工具</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>nrm add kingyinliang http://192.168.XX.50:4873    #添加本地私服地址
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里的kingyinliang是我们给自己的私服地址起的别名，为了切换和使用方便。<br>
将npm包的下载地址改到kingyinliang的私服。</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>nrm use kingyinliang verb config Skipping project config: C:\Users\kingyinliang/.npmrc. (matches userconfig)
Registry has been set to: http://192.168.XX.50:4873/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用nrm ls可查到我们可以使用的所有镜像源地址，* 后面是当前使用的，如果我们不想从私服上下载包，就可以用上一步骤的nrm use命令，use其它的地址，将下载地址改到别的服务器。</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>C:\Users\Hepburn Yang&gt;nrm ls

  npm ---- https://registry.npmjs.org/
  cnpm --- http://r.cnpmjs.org/
  taobao - https://registry.npm.taobao.org/
  nj ----- https://registry.nodejitsu.com/
  rednpm - http://registry.mirror.cqupt.edu.cn/
  npmMirror  https://skimdb.npmjs.com/registry/
  edunpm - http://registry.enpmjs.org/ 
* kingyinliang --- http://192.168.XX.50:4873/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="发布包"><a href="#发布包" aria-hidden="true" class="header-anchor">#</a> 发布包</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm publish           #已经切换到我们私服地址的情况下
npm publish --registry http://192.168.XX.50:4873   #未切换到我们的私服时，直接加后缀可以发布到私服上。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="同步项目所需要的包到verdaccio中"><a href="#同步项目所需要的包到verdaccio中" aria-hidden="true" class="header-anchor">#</a> 同步项目所需要的包到verdaccio中</h3> <p><a data-fancybox="" title="npm" href="/standard/workflow/work19.jpg"><img src="/standard/workflow/work19.jpg" alt="npm.jpg" title="npm"></a></p></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2019-8-14 6:29:41 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/standard/release.html" class="prev">
          发布规范
        </a></span> <!----></p></div> </main> <div class="valine-wrapper" data-v-355bf788><div id="valine" data-v-355bf788></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-f9458a92 data-v-f9458a92><i class="iconfont reco-up" data-v-f9458a92></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8b298d71.js" defer></script><script src="/assets/js/3.1047f7fc.js" defer></script><script src="/assets/js/1.e9036eeb.js" defer></script><script src="/assets/js/31.8bdbfc59.js" defer></script>
  </body>
</html>
