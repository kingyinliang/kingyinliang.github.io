<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | kingyingliang</title>
    <meta name="description" content="kingyingliang的个人博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.2868158a.css" as="style"><link rel="preload" href="/assets/js/app.8b298d71.js" as="script"><link rel="preload" href="/assets/js/3.1047f7fc.js" as="script"><link rel="preload" href="/assets/js/1.e9036eeb.js" as="script"><link rel="preload" href="/assets/js/15.90e4a351.js" as="script"><link rel="prefetch" href="/assets/js/10.faea7ed6.js"><link rel="prefetch" href="/assets/js/11.a1eb7cb1.js"><link rel="prefetch" href="/assets/js/12.a94480e8.js"><link rel="prefetch" href="/assets/js/13.78aa3210.js"><link rel="prefetch" href="/assets/js/14.873f66c8.js"><link rel="prefetch" href="/assets/js/16.e9797b58.js"><link rel="prefetch" href="/assets/js/17.ae73df78.js"><link rel="prefetch" href="/assets/js/18.63201470.js"><link rel="prefetch" href="/assets/js/19.74ca95e4.js"><link rel="prefetch" href="/assets/js/20.ca975c1c.js"><link rel="prefetch" href="/assets/js/21.03ae9a37.js"><link rel="prefetch" href="/assets/js/22.30d540c3.js"><link rel="prefetch" href="/assets/js/23.4c7ee792.js"><link rel="prefetch" href="/assets/js/24.c286385e.js"><link rel="prefetch" href="/assets/js/25.3dcf4fb6.js"><link rel="prefetch" href="/assets/js/26.136db144.js"><link rel="prefetch" href="/assets/js/27.7f89bba4.js"><link rel="prefetch" href="/assets/js/28.5f2690f1.js"><link rel="prefetch" href="/assets/js/29.e455dd30.js"><link rel="prefetch" href="/assets/js/30.9b5791ce.js"><link rel="prefetch" href="/assets/js/31.8bdbfc59.js"><link rel="prefetch" href="/assets/js/32.c6d259c7.js"><link rel="prefetch" href="/assets/js/33.a52d22d8.js"><link rel="prefetch" href="/assets/js/34.4c6deef9.js"><link rel="prefetch" href="/assets/js/35.b974d0f2.js"><link rel="prefetch" href="/assets/js/36.75dbacb4.js"><link rel="prefetch" href="/assets/js/4.42ba4794.js"><link rel="prefetch" href="/assets/js/5.903262c0.js"><link rel="prefetch" href="/assets/js/6.029a538f.js"><link rel="prefetch" href="/assets/js/7.43e76bc3.js"><link rel="prefetch" href="/assets/js/8.cdc6e064.js"><link rel="prefetch" href="/assets/js/9.21bfb851.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2868158a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.png" alt="kingyingliang" class="logo"> <span class="site-name">kingyingliang</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>规范</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/standard/HTML.html" class="nav-link"><i class="iconfont undefined"></i>
  HTML
</a></li><li class="dropdown-subitem"><a href="/standard/CSS.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-subitem"><a href="/standard/JS.html" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/standard/GIT.html" class="nav-link"><i class="iconfont undefined"></i>
  GIT
</a></li><li class="dropdown-subitem"><a href="/standard/TEST.html" class="nav-link"><i class="iconfont undefined"></i>
  测试
</a></li><li class="dropdown-subitem"><a href="/standard/workflow.html" class="nav-link"><i class="iconfont undefined"></i>
  工作流
</a></li><li class="dropdown-subitem"><a href="/standard/wepy.html" class="nav-link"><i class="iconfont undefined"></i>
  小程序
</a></li></ul></li><li class="dropdown-item"><h4>技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Technology/Nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nuxt
</a></li><li class="dropdown-subitem"><a href="/Technology/Nesxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nesxt微服务
</a></li><li class="dropdown-subitem"><a href="/Technology/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/Technology/Koa/Koa.html" class="nav-link"><i class="iconfont undefined"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/Technology/React/React.html" class="nav-link router-link-exact-active router-link-active"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-subitem"><a href="/Technology/Express/Express.html" class="nav-link"><i class="iconfont undefined"></i>
  Express
</a></li><li class="dropdown-subitem"><a href="/Technology/Electron/Electron.html" class="nav-link"><i class="iconfont undefined"></i>
  Electron
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      读书会
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/readingParty/reconsitution/" class="nav-link"><i class="iconfont undefined"></i>
  重构
</a></li><li class="dropdown-item"><!----> <a href="/readingParty/" class="nav-link"><i class="iconfont undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/share/" class="nav-link"><i class="iconfont reco-other"></i>
  分享
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-three"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></li><li class="dropdown-item"><!----> <a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/category/Tenchnology.html" class="nav-link"><i class="iconfont reco-category"></i>
  分类
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kingyinliang" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>规范</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/standard/HTML.html" class="nav-link"><i class="iconfont undefined"></i>
  HTML
</a></li><li class="dropdown-subitem"><a href="/standard/CSS.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-subitem"><a href="/standard/JS.html" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/standard/GIT.html" class="nav-link"><i class="iconfont undefined"></i>
  GIT
</a></li><li class="dropdown-subitem"><a href="/standard/TEST.html" class="nav-link"><i class="iconfont undefined"></i>
  测试
</a></li><li class="dropdown-subitem"><a href="/standard/workflow.html" class="nav-link"><i class="iconfont undefined"></i>
  工作流
</a></li><li class="dropdown-subitem"><a href="/standard/wepy.html" class="nav-link"><i class="iconfont undefined"></i>
  小程序
</a></li></ul></li><li class="dropdown-item"><h4>技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Technology/Nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nuxt
</a></li><li class="dropdown-subitem"><a href="/Technology/Nesxt/" class="nav-link"><i class="iconfont undefined"></i>
  Nesxt微服务
</a></li><li class="dropdown-subitem"><a href="/Technology/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/Technology/Koa/Koa.html" class="nav-link"><i class="iconfont undefined"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/Technology/React/React.html" class="nav-link router-link-exact-active router-link-active"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-subitem"><a href="/Technology/Express/Express.html" class="nav-link"><i class="iconfont undefined"></i>
  Express
</a></li><li class="dropdown-subitem"><a href="/Technology/Electron/Electron.html" class="nav-link"><i class="iconfont undefined"></i>
  Electron
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      读书会
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/readingParty/reconsitution/" class="nav-link"><i class="iconfont undefined"></i>
  重构
</a></li><li class="dropdown-item"><!----> <a href="/readingParty/" class="nav-link"><i class="iconfont undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/share/" class="nav-link"><i class="iconfont reco-other"></i>
  分享
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-three"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></li><li class="dropdown-item"><!----> <a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/category/Tenchnology.html" class="nav-link"><i class="iconfont reco-category"></i>
  分类
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kingyinliang" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Technology/React/React.html" class="active sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Technology/React/React.html#react的介绍" class="sidebar-link">React的介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Technology/React/React.html#react中的核心概念" class="sidebar-link">React中的核心概念</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#虚拟dom（vitural-dom）" class="sidebar-link">虚拟DOM（Vitural DOM）</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#diff算法" class="sidebar-link">Diff算法</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#问题" class="sidebar-link">问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#入门" class="sidebar-link">入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Technology/React/React.html#super关键字：" class="sidebar-link">super关键字：</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#组件-绑定属性" class="sidebar-link">组件 绑定属性</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#事件，方法" class="sidebar-link">事件，方法</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#组件，父子组件" class="sidebar-link">组件，父子组件</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#antd" class="sidebar-link">antd</a></li></ul></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#router路由" class="sidebar-link">router路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Technology/React/React.html#动态路由" class="sidebar-link">动态路由</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#路由嵌套" class="sidebar-link">路由嵌套</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#路由模块化" class="sidebar-link">路由模块化</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#browserrouter" class="sidebar-link">BrowserRouter</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#route" class="sidebar-link">Route</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#link" class="sidebar-link">Link</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#navlink" class="sidebar-link">NavLink</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#switch" class="sidebar-link">Switch</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#redirect" class="sidebar-link">Redirect</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#prompt" class="sidebar-link">Prompt</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#history" class="sidebar-link">history</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#location" class="sidebar-link">location</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#match" class="sidebar-link">match</a></li></ul></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#脚手架" class="sidebar-link">脚手架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Technology/React/React.html#文件结构" class="sidebar-link">文件结构</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#react-app-rewired" class="sidebar-link">react-app-rewired</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#安装antd" class="sidebar-link">安装antd</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#安装react-router" class="sidebar-link">安装react-router</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#安装react-router-dom" class="sidebar-link">安装react-router-dom</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#安装axios" class="sidebar-link">安装axios</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#npm-run-build-遇到的问题" class="sidebar-link">npm run build 遇到的问题</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#pwa-渐进式web应用" class="sidebar-link">PWA(渐进式web应用)</a></li><li class="sidebar-sub-header"><a href="/Technology/React/React.html#react-loadable-按需加载" class="sidebar-link">react-loadable 按需加载</a></li></ul></li></ul></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>React</h1> <hr> <div data-v-cf5504f4><i class="iconfont reco-account" data-v-cf5504f4><span data-v-cf5504f4>kingyinliang</span></i> <i class="iconfont reco-date" data-v-cf5504f4><span data-v-cf5504f4>2018-12-4</span></i> <!----> <i class="iconfont reco-tag tags" data-v-cf5504f4><span class="tag-item" data-v-cf5504f4>
      React
    </span></i></div></div> <div class="content__default"><h2 id="react的介绍"><a href="#react的介绍" aria-hidden="true" class="header-anchor">#</a> React的介绍</h2> <ul><li>React来自于Facebook公司的开源项目</li> <li>React 可以开发单页面应用       spa（单页面应用）</li> <li>react 组件化模块化  开发模式</li> <li>React通过对DOM的模拟(虚拟dom)，最大限度地减少与DOM的交互  （数据绑定）</li> <li>react灵活  React可以与已知的库或框架很好地配合。</li> <li>react 基于jsx的语法，JSX是React的核心组成部分，它使用XML标记的方式去直接声明界面，  html  js混写模式</li></ul> <h3 id="react中的核心概念"><a href="#react中的核心概念" aria-hidden="true" class="header-anchor">#</a> React中的核心概念</h3> <ol><li>虚拟DOM（Virtual DOM）</li> <li>Diff算法（虚拟DOM的加速器，提升React性能的法宝）</li></ol> <h3 id="虚拟dom（vitural-dom）"><a href="#虚拟dom（vitural-dom）" aria-hidden="true" class="header-anchor">#</a> 虚拟DOM（Vitural DOM）</h3> <p>React将DOM抽象为虚拟DOM，虚拟DOM其实就是用一个对象来描述DOM，通过对比前后两个对象的差异，最终只把变化的部分重新渲染，提高渲染的效率<br>
为什么用虚拟dom，当dom反生更改时需要遍历 而原生dom可遍历属性多大231个 且大部分与渲染无关 更新页面代价太大<br> <a href="https://github.com/livoras/blog/issues/13" target="_blank" rel="noopener noreferrer">如何实现一个 Virtual DOM 算法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://www.zhihu.com/question/31809713" target="_blank" rel="noopener noreferrer">理解 Virtual DOM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="diff算法"><a href="#diff算法" aria-hidden="true" class="header-anchor">#</a> Diff算法</h3> <p><a href="https://reactjs.org/docs/reconciliation.html" target="_blank" rel="noopener noreferrer">Reconciliation diff<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://react.docschina.org/docs/reconciliation.html" target="_blank" rel="noopener noreferrer">diff算法 - 中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://zhuanlan.zhihu.com/p/20346379" target="_blank" rel="noopener noreferrer">不可思议的 react diff<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/zmmbreeze/blog/issues/9" target="_blank" rel="noopener noreferrer">React diff 算法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="问题"><a href="#问题" aria-hidden="true" class="header-anchor">#</a> 问题</h3> <h4 id="（1）q：为什么react里可以在js里return一段“html”代码？"><a href="#（1）q：为什么react里可以在js里return一段“html”代码？" aria-hidden="true" class="header-anchor">#</a> （1）Q：为什么react里可以在JS里return一段“HTML”代码？</h4> <p>A：这是react特有的JSX语法糖，它并不是一个真正的DOM节点，react会调用ReactDom.render()方法，它接受两个参数：创建的模板，插入该模板的目标位置。这就涉及到了react的“虚拟DOM”的概念。众所周知，DOM操作是十分损耗性能的，尤其对于循环渲染来说，更是如此。因此，react引入了“虚拟DOM”。事实上，所有的DOM节点都能够用一个js对象来表示，他有三个属性：标签名、属性和子元素，这样整个页面的DOM树就可以用这样一个对象来表示，操作js对象的性能损耗远远小于对DOM的操作。react采用Diff算法对改变前后的js对象进行比对，先对js对象进行修改，最后统一渲染DOM，这样就减少了DOM的渲染次数，优化了性能。</p> <h4 id="（2）q：感觉代码中并没有用到react，为什么需要引入，是否能够删除？"><a href="#（2）q：感觉代码中并没有用到react，为什么需要引入，是否能够删除？" aria-hidden="true" class="header-anchor">#</a> （2）Q：感觉代码中并没有用到React，为什么需要引入，是否能够删除？</h4> <p>A：不能删除，因为JSX模板需要通过React来解析，删除后，JSX不能被识别。</p> <h4 id="（3）q：官方的demo中组件继承的是component类，为什么这里引入purecomponent？"><a href="#（3）q：官方的demo中组件继承的是component类，为什么这里引入purecomponent？" aria-hidden="true" class="header-anchor">#</a> （3）Q：官方的demo中组件继承的是Component类，为什么这里引入PureComponent？</h4> <p>A：react的数据在更新时，会引起所有子组件的重新渲染，但可能这个数据和某些甚至所有的子组件都无关，实际上是不需要重新渲染的，这样就造成了性能浪费。react中有shouldComponentUpdate生命周期，可以控制是否更新组件，但是每个组件中加这样一个判断十分繁琐。好在ReactFiber（react16+）为我们新增了PureComponent特性，可以在底层自动为我们判断是否更新组件，这样无疑提升了性能。</p> <h4 id="（4）q：这里为div定义类名为什么使用classname而不是class？"><a href="#（4）q：这里为div定义类名为什么使用classname而不是class？" aria-hidden="true" class="header-anchor">#</a> （4）Q：这里为div定义类名为什么使用className而不是class？</h4> <p>A：这是react为了区分声明类的关键字class，所有的css类名都应该使用className。</p> <h2 id="入门"><a href="#入门" aria-hidden="true" class="header-anchor">#</a> 入门</h2> <h3 id="super关键字："><a href="#super关键字：" aria-hidden="true" class="header-anchor">#</a> super关键字：</h3> <div class="tip custom-block"><p>Es6中的super可以用在类的继承中，super关键字，它指代父类的实例（即父类的this对象）。子类必须在constructor方法中调用super方法，否则新建实例时会报错。这是因为子类没有自己的this对象，而是继承父类的this对象，然后对其进行加工。如果不调用super方法，子类就得不到this对象。</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用在构造函数中，必须在使用this之前调用</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="tip custom-block"><p>super(props)：需要传递props作为super()的参数,就是你需要在构造函数内使用this.props</p></div> <h3 id="组件-绑定属性"><a href="#组件-绑定属性" aria-hidden="true" class="header-anchor">#</a> 组件 绑定属性</h3> <h4 id="_1-所有的模板要被一个根节点包含起来"><a href="#_1-所有的模板要被一个根节点包含起来" aria-hidden="true" class="header-anchor">#</a> 1.所有的模板要被一个根节点包含起来</h4> <h4 id="_2-模板元素不要加引号"><a href="#_2-模板元素不要加引号" aria-hidden="true" class="header-anchor">#</a> 2.模板元素不要加引号</h4> <h4 id="_3-绑定数据"><a href="#_3-绑定数据" aria-hidden="true" class="header-anchor">#</a> 3.{}绑定数据</h4> <h4 id="_4-绑定属性注意："><a href="#_4-绑定属性注意：" aria-hidden="true" class="header-anchor">#</a> 4.绑定属性注意：</h4> <p>class 要变成 className<br>
for 要变成  htmlFor<br>
style属性和以前的写法有些不一样</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>&lt;div style={{'color':'blue'}}&gt;{this.state.title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
&lt;div style={{'color':this.state.color}}&gt;{this.state.title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_5-循环数据要加key"><a href="#_5-循环数据要加key" aria-hidden="true" class="header-anchor">#</a> 5.循环数据要加key</h4> <h4 id="_6-组件的构造函数中一定要注意-super"><a href="#_6-组件的构造函数中一定要注意-super" aria-hidden="true" class="header-anchor">#</a> 6.组件的构造函数中一定要注意 super</h4> <p>子类必须在constructor方法中调用super方法，否则新建实例时会报错。这是因为子类没有自己的this对象，而是继承父类的this对象，然后对其进行加工。如果不调用super方法，子类就得不到this对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">/*用于父子组件传值  固定写法*/</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span>
        userinfo<span class="token punctuation">:</span><span class="token string">'张三'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_7-组件名称首字母大写、组件类名称首字母大写"><a href="#_7-组件名称首字母大写、组件类名称首字母大写" aria-hidden="true" class="header-anchor">#</a> 7.组件名称首字母大写、组件类名称首字母大写</h4> <h4 id="_8-注释-aaaa"><a href="#_8-注释-aaaa" aria-hidden="true" class="header-anchor">#</a> 8.注释 {/* aaaa */}</h4> <h3 id="事件，方法"><a href="#事件，方法" aria-hidden="true" class="header-anchor">#</a> 事件，方法</h3> <p>在以类继承的方式定义的组件中，为了能方便地调用当前组件的其他成员方法或属性（如：this.state），通常需要将事件处理函数运行时的 this 指向当前组件实例。<br>
绑定事件处理函数this的几种方法：<br>
第一种方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>第二种方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 构造函数中改变</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 	<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
 	 <span class="token punctuation">}</span>
 	<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>run<span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>第三种方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token function-variable function">run</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>run<span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="事件对象-在触发dom上的某个事件时-会产生一个事件对象event。这个对象中包含着所有与事件有关的信息"><a href="#事件对象-在触发dom上的某个事件时-会产生一个事件对象event。这个对象中包含着所有与事件有关的信息" aria-hidden="true" class="header-anchor">#</a> 事件对象:在触发DOM上的某个事件时,会产生一个事件对象event。这个对象中包含着所有与事件有关的信息</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">run</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// console.log(event);</span>
    <span class="token comment">// alert(event.target);   /*获取执行事件的dom节点*/</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">;</span>
    <span class="token comment">//获取dom的属性</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aid'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="获取表单的值"><a href="#获取表单的值" aria-hidden="true" class="header-anchor">#</a> 获取表单的值</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token comment">/* 获取表单的值
1、监听表单的改变事件                        onChange
2、在改变的事件里面获取表单输入的值           事件对象
3、把表单输入的值赋值给username              this.setState({})
4、点击按钮的时候获取 state里面的username     this.state.username
 */</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ref"><a href="#ref" aria-hidden="true" class="header-anchor">#</a> ref</h4> <p>同vue<br>
1、给元素定义ref属性</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、通过this.refs.username 获取dom节点</p> <h4 id="键盘事件"><a href="#键盘事件" aria-hidden="true" class="header-anchor">#</a> 键盘事件</h4> <p>onKeyDown  onKeyUp</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//键盘事件</span>
<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> 
            username<span class="token punctuation">:</span><span class="token string">''</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">inputKeyUp</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode<span class="token operator">==</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>input onKeyUp<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputKeyUp<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="双向数据绑定"><a href="#双向数据绑定" aria-hidden="true" class="header-anchor">#</a> 双向数据绑定</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Todolist</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> 
            username<span class="token punctuation">:</span><span class="token string">&quot;111&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">inputChange</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            username<span class="token punctuation">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">setUsername</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            username<span class="token punctuation">:</span><span class="token string">'李四'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* model改变影响View    view改变反过来影响model  */</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>input  value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> 
               <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
               <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>setUsername<span class="token punctuation">}</span><span class="token operator">&gt;</span>改变username的值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="约束性和非约束性组件"><a href="#约束性和非约束性组件" aria-hidden="true" class="header-anchor">#</a> 约束性和非约束性组件:</h4> <p><strong>非约束性组件</strong>:<code>&lt;input type=&quot;text&quot; defaultValue=&quot;a&quot; /&gt;</code>   这个 <code>defaultValue</code> 其实就是原生DOM中的 <code>value</code> 属性。这样写出的来的组件，其<code>value</code>值就是用户输入的内容，React完全不管理输入的过程。<br> <strong>约束性组件</strong>：<code>&lt;input value={this.state.username} type=&quot;text&quot; onChange={this.handleUsername} /&gt;</code>这里，<code>value</code>属性不再是一个写死的值，他是 <code>this.state.username</code>, <code>this.state.username</code> 是由 <code>this.handleChange</code> 负责管理的。这个时候实际上 <code>input</code> 的<code>value</code>根本不是用户输入的内容。而是<code>onChange</code> 事件触发之后，由于 <code>this.setState</code> 导致了一次重新渲染。不过React会优化这个渲染过程。看上去有点类似双向数据绑定</p> <h4 id="表单"><a href="#表单" aria-hidden="true" class="header-anchor">#</a> 表单</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ReactForm</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>  
            msg<span class="token punctuation">:</span><span class="token string">&quot;react表单&quot;</span><span class="token punctuation">,</span>
            name<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>  
            sex<span class="token punctuation">:</span><span class="token string">'1'</span><span class="token punctuation">,</span>     
            city<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>      
            citys<span class="token punctuation">:</span><span class="token punctuation">[</span> 
                
                <span class="token string">'北京'</span><span class="token punctuation">,</span><span class="token string">'上海'</span><span class="token punctuation">,</span><span class="token string">'深圳'</span>            
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            hobby<span class="token punctuation">:</span><span class="token punctuation">[</span>   
                <span class="token punctuation">{</span>  
                    <span class="token string">'title'</span><span class="token punctuation">:</span><span class="token string">&quot;睡觉&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">'checked'</span><span class="token punctuation">:</span><span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>  
                    <span class="token string">'title'</span><span class="token punctuation">:</span><span class="token string">&quot;吃饭&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">'checked'</span><span class="token punctuation">:</span><span class="token boolean">false</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>  
                    <span class="token string">'title'</span><span class="token punctuation">:</span><span class="token string">&quot;敲代码&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">'checked'</span><span class="token punctuation">:</span><span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            info<span class="token punctuation">:</span><span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleInfo<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInfo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handelSubmit</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">//阻止submit的提交事件</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>city<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hobby<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handelName</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            name<span class="token punctuation">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handelSex</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            sex<span class="token punctuation">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handelCity</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            city<span class="token punctuation">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handelHobby</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> hobby<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hobby<span class="token punctuation">;</span>
        hobby<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>checked<span class="token operator">=</span><span class="token operator">!</span>hobby<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>checked<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            hobby<span class="token punctuation">:</span>hobby
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleInfo</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            info<span class="token punctuation">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  用户名<span class="token punctuation">:</span>  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span>  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelName<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                  性别<span class="token punctuation">:</span>    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;radio&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>sex<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">}</span>  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelSex<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>男 

                            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;radio&quot;</span>  value<span class="token operator">=</span><span class="token string">&quot;2&quot;</span> checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>sex<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">}</span>  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelSex<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>女 <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span> 
                 居住城市<span class="token punctuation">:</span>
                        <span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>city<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelCity<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            <span class="token punctuation">{</span>
                                <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>citys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                    <span class="token keyword">return</span> <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                 爱好<span class="token punctuation">:</span>   
                    <span class="token punctuation">{</span>
                        <span class="token comment">// 注意this指向</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>key</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                               <span class="token operator">&lt;</span>span key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span>  checked<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>checked<span class="token punctuation">}</span>  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handelHobby</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>value<span class="token punctuation">.</span>title<span class="token punctuation">}</span> 
                               <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                            <span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                  备注：<span class="token operator">&lt;</span>textarea vlaue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>info<span class="token punctuation">}</span>  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInfo<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                 <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>  defaultValue<span class="token operator">=</span><span class="token string">&quot;提交&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ReactForm<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br></div></div><h3 id="组件，父子组件"><a href="#组件，父子组件" aria-hidden="true" class="header-anchor">#</a> 组件，父子组件</h3> <p>React中的组件: 解决html 标签构建应用的不足。</p> <div class="tip custom-block"><p>使用组件的好处：把公共的功能单独抽离成一个文件作为一个组件，哪里里使用哪里引入。</p></div> <p><strong>父子组件</strong>：组件的相互调用中，我们把调用者称为父组件，被调用者称为子组件<br> <strong>父子组件传值：</strong><br>
父组件给子组件传值<br>
1.在调用子组件的时候定义一个属性  <code>&lt;Header msg='首页'&gt;&lt;/Header&gt;</code><br>
2.子组件里面 <code>this.props.msg</code></p> <div class="tip custom-block"><p>说明：父组件不仅可以给子组件传值，还可以给子组件传方法,以及把整个父组件传给子组件。</p></div> <p>父组件主动获取子组件的数据<br>
1、调用子组件的时候指定ref的值   <code>&lt;Header ref='header'&gt;&lt;/Header&gt;</code><br>
2、通过<code>this.refs.header</code>  获取整个子组件实例<br> <strong>defaultProps</strong>:父子组件传值中，如果父组件调用子组件的时候不给子组件传值，可以在子组件中使用defaultProps定义的默认值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Header<span class="token punctuation">.</span>defaultProps<span class="token operator">=</span><span class="token punctuation">{</span>
    title<span class="token punctuation">:</span><span class="token string">'标题'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>propTypes</strong>：验证父组件传值的类型合法性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
Header<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p>都是定义在子组件里面</p></div> <h3 id="生命周期"><a href="#生命周期" aria-hidden="true" class="header-anchor">#</a> 生命周期</h3> <p>组件加载之前，组件加载完成，以及组件更新数据，组件销毁。触发的一系列的方法 ，这就是组件的生命周期函数</p> <h4 id="组件加载的时候触发的函数："><a href="#组件加载的时候触发的函数：" aria-hidden="true" class="header-anchor">#</a> 组件加载的时候触发的函数：</h4> <p><code>constructor</code>、<code>componentWillMount</code>、 <code>render</code> 、<code>componentDidMount</code></p> <h4 id="组件数据更新的时候触发的生命周期函数："><a href="#组件数据更新的时候触发的生命周期函数：" aria-hidden="true" class="header-anchor">#</a> 组件数据更新的时候触发的生命周期函数：</h4> <p><code>shouldComponentUpdate</code>、<code>componentWillUpdate</code>、<code>render</code>、<code>componentDidUpdate</code></p> <h4 id="你在父组件里面改变props传值的时候触发的："><a href="#你在父组件里面改变props传值的时候触发的：" aria-hidden="true" class="header-anchor">#</a> 你在父组件里面改变props传值的时候触发的：</h4> <p><code>componentWillReceiveProps</code></p> <h4 id="组件销毁的时候触发的："><a href="#组件销毁的时候触发的：" aria-hidden="true" class="header-anchor">#</a> 组件销毁的时候触发的：</h4> <p><code>componentWillUnmount</code></p> <div class="tip custom-block"><p><strong>加载的时候：</strong> <code>componentWillMount</code>、<code>render</code>、<code>componentDidMount</code>（dom操作）<br> <strong>更新的时候：</strong> <code>componentWillUpdate</code>、<code>render</code>、<code>componentDidUpdate</code><br> <strong>销毁的时候：</strong> <code>componentWillUnmount</code></p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Lifecycle</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'01构造函数'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> 
            msg<span class="token punctuation">:</span><span class="token string">'我是一个msg'</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>  
    <span class="token comment">//组件将要挂载的时候触发的生命周期函数</span>
    <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'02组件将要挂载'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//组件挂载完成的时候触发的生命周期函数</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//dom操作放在这个里面    请求数据也放在这个里面</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'04组件将要挂载'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//是否要更新数据  如果返回true才会执行更新数据的操作</span>
    <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'01是否要更新数据'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//将要更新数据的时候触发</span>
    <span class="token function">componentWillUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'02组件将要更新'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//组件更新完成</span>
    <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'04组件数据更新完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 你在父组件里面改变props传值的时候触发的</span>
    <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父子组件传值，父组件里面改变了props的值触发的方法'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">setMsg</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            msg<span class="token punctuation">:</span><span class="token string">'我是改变后的msg的数据'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//组件销毁的时候触发的生命周期函数   用在组件销毁的时候执行操作</span>
    <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件销毁了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'03数据渲染render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                生命周期函数演示<span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>setMsg<span class="token punctuation">}</span><span class="token operator">&gt;</span>更新msg的数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Lifecycle<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="antd"><a href="#antd" aria-hidden="true" class="header-anchor">#</a> antd</h3> <p><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener noreferrer">antd官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>安装antd   npm install antd --save    /   yarn add antd     /  cnpm install antd --save</li> <li>在您的react项目的css文件中引入 Antd的css
<code>@import '~antd/dist/antd.css';</code></li> <li>看文档使用：<br>
如使用Button：<br>
1、在对应的组件中引入Antd        <code>import { Button } from 'antd'</code>;<br>
2、<code>&lt;Button type=&quot;primary&quot;&gt;Primary&lt;/Button&gt;</code></li> <li>React中使用Antd高级配置，按需引入css样式</li></ol> <h4 id="我们现在已经把组件成功运行起来了，但是在实际开发过程中还有很多问题，例如上面的例子实际上加载了全部的-antd-组件的样式（对前端性能是个隐患）。"><a href="#我们现在已经把组件成功运行起来了，但是在实际开发过程中还有很多问题，例如上面的例子实际上加载了全部的-antd-组件的样式（对前端性能是个隐患）。" aria-hidden="true" class="header-anchor">#</a> 我们现在已经把组件成功运行起来了，但是在实际开发过程中还有很多问题，例如上面的例子实际上加载了全部的 antd 组件的样式（对前端性能是个隐患）。</h4> <ol><li>安装antd         <code>npm install antd --save</code></li> <li>安装<code>（react-app-rewired）</code>一个对 <code>create-react-app</code> 进行自定义配置的社区解决方案
<code>yarn add react-app-rewired / cnpm install react-app-rewired --save</code></li> <li>修改 <code>package.json</code> <code>react-scripts</code> 需改为<code>react-app-rewired</code></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-app-rewired start&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-app-rewired build&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-app-rewired test --env=jsdom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;eject&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-app-rewired eject&quot;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="4"><li>在项目根目录创建一个 <code>config-overrides.js</code> 用于修改默认配置</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">override</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// do stuff with the webpack config...</span>
 <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li>安装<code>babel-plugin-import</code> <code>babel-plugin-import</code>是一个用于按需加载组件代码和样式的 <code>babel</code>插件
<code>yarn add babel-plugin-import / cnpm install babel-plugin-import --save</code></li> <li>修改 <code>config-overrides.js</code></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> injectBabelPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-app-rewired'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">override</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   config <span class="token operator">=</span> <span class="token function">injectBabelPlugin</span><span class="token punctuation">(</span>
         <span class="token punctuation">[</span><span class="token string">'import'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> libraryName<span class="token punctuation">:</span> <span class="token string">'antd'</span><span class="token punctuation">,</span> libraryDirectory<span class="token punctuation">:</span> <span class="token string">'es'</span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token string">'css'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
           config<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> config<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="7"><li>然后移除前面在 <code>src/App.css</code> 里全量添加的 <code>@import '~antd/dist/antd.css';</code> 直接引入组件使用就会有对应的css</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
  <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>Primary<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="router路由"><a href="#router路由" aria-hidden="true" class="header-anchor">#</a> router路由</h2> <p><a href="https://github.com/ReactTraining/react-router" target="_blank" rel="noopener noreferrer">react-router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
react路由的配置：</p> <ol><li><a href="https://reacttraining.com/react-router/web/example/basic" target="_blank" rel="noopener noreferrer">找到官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>安装  cnpm install react-router-dom --save</li> <li>找到项目的根组件引入react-router-dom
import { BrowserRouter as Router, Route, Link } from &quot;react-router-dom&quot;;</li> <li>复制官网文档根组件里面的内容进行修改  （加载的组件要提前引入）</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/news&quot;</span><span class="token operator">&gt;</span>新闻<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/product&quot;</span><span class="token operator">&gt;</span>商品<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/news&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>News<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>    
   <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/product&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>   
 <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="tip custom-block"><p>exact表示严格匹配</p></div> <h3 id="动态路由"><a href="#动态路由" aria-hidden="true" class="header-anchor">#</a> 动态路由</h3> <ol><li>动态路由配置<br> <code>&lt;Route path=&quot;/content/:aid&quot; component={Content} /&gt;</code></li> <li>对应的动态路由加载的组件里面获取传值<br> <code>this.props.match.params</code></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//获取动态路由的传值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>aid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/content/:aid&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Content<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/content/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token punctuation">.</span>aid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>get传值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/content?aid=1&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Content<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>         
    <span class="token keyword">import</span> url <span class="token keyword">from</span> <span class="token string">'url'</span><span class="token punctuation">;</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//获取get传值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> query<span class="token operator">=</span>url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>query<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="路由嵌套"><a href="#路由嵌套" aria-hidden="true" class="header-anchor">#</a> 路由嵌套</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;left&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/user/&quot;</span><span class="token operator">&gt;</span>个人中心<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/user/info&quot;</span><span class="token operator">&gt;</span>用户信息<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Main<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route  path<span class="token operator">=</span><span class="token string">&quot;/user/info&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Info<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="路由模块化"><a href="#路由模块化" aria-hidden="true" class="header-anchor">#</a> 路由模块化</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
routes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route<span class="token punctuation">,</span>key</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>exact<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>Route key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span> exact path<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>path<span class="token punctuation">}</span>                     
      <span class="token comment">// route.component     value.component   &lt;User  {...props}  routes={route.routes} /&gt;</span>
      render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token comment">// pass the sub-routes down to keep nesting</span>
        <span class="token operator">&lt;</span>route<span class="token punctuation">.</span>component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> routes<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>routes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>Route  key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span>  path<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>path<span class="token punctuation">}</span> 
      render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token comment">// pass the sub-routes down to keep nesting</span>
        <span class="token operator">&lt;</span>route<span class="token punctuation">.</span>component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> routes<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>routes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="browserrouter"><a href="#browserrouter" aria-hidden="true" class="header-anchor">#</a> BrowserRouter</h3> <p>一个使用了 HTML5 history API 的高阶路由组件，保证你的 UI 界面和 URL 保持同步。此组件拥有以下属性：<br> <strong>basename: string</strong><br>
作用：为所有位置添加一个基准URL<br>
使用场景：假如你需要把页面部署到服务器的二级目录，你可以使用 basename 设置到此目录。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>BrowserRouter basename<span class="token operator">=</span><span class="token string">&quot;/minooo&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/react&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// 最终渲染为 &lt;a href=&quot;/minooo/react&quot;&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>getUserConfirmation: func</strong><br>
作用：导航到此页面前执行的函数，默认使用 window.confirm<br>
使用场景：当需要用户进入页面前执行什么操作时可用，不过一般用到的不多。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getConfirmation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> allowTransition <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
  <span class="token function">callback</span><span class="token punctuation">(</span>allowTransition<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>BrowserRouter getUserConfirmation<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getConfirmation</span><span class="token punctuation">(</span><span class="token string">'Are you sure?'</span><span class="token punctuation">,</span> yourCallBack<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>forceRefresh: bool</strong><br>
作用：当浏览器不支持 HTML5 的 history API 时强制刷新页面。<br>
使用场景：同上。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> supportsHistory <span class="token operator">=</span> <span class="token string">'pushState'</span> <span class="token keyword">in</span> window<span class="token punctuation">.</span>history
<span class="token operator">&lt;</span>BrowserRouter forceRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span>supportsHistory<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>keyLength: number</strong><br>
作用：设置它里面路由的 location.key 的长度。默认是6。（key的作用：点击同一个链接时，每次该路由下的 location.key都会改变，可以通过 key 的变化来刷新页面。）<br>
使用场景：按需设置。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>BrowserRouter keyLength<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>children: node</strong><br>
作用：渲染唯一子元素。<br>
使用场景：作为一个 Reac t组件，天生自带 children 属性。</p> <h3 id="route"><a href="#route" aria-hidden="true" class="header-anchor">#</a> Route</h3> <p>它最基本的职责就是当页面的访问地址与 <code>Route</code> 上的 <code>path</code> 匹配时，就渲染出对应的 UI 界面。<br> <code>&lt;Route&gt;</code> 自带三个 <code>render</code> <code>method</code> 和三个 <code>props</code>。<br>
render methods 分别是：</p> <ul><li><code>&lt;Route component&gt;</code></li> <li><code>&lt;Route render&gt;</code></li> <li><code>&lt;Route children&gt;</code></li></ul> <div class="tip custom-block"><p>每种 render method 都有不同的应用场景，同一个<code>&lt;Route&gt;</code> 应该只使用一种 render method ，大部分情况下你将使用 component 。</p></div> <p>props 分别是：</p> <ul><li>match</li> <li>location</li> <li>history</li></ul> <div class="tip custom-block"><p>所有的 render method 无一例外都将被传入这些 props。</p></div> <p><strong>component</strong>
只有当访问地址和路由匹配时，一个 React component 才会被渲染，此时此组件接受 route props (match, location, history)。<br>
当使用 component 时，router 将使用 React.createElement 根据给定的 component 创建一个新的 React 元素。这意味着如果你使用内联函数（inline function）传值给 component 将会产生不必要的重复装载。对于内联渲染（inline rendering）, 建议使用 render prop。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user/:username&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token keyword">const</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> match <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello <span class="token punctuation">{</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>render: func</strong><br>
此方法适用于内联渲染，而且不会产生上文说的重复装载问题。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 内联渲染</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">// 包装 组合</span>
<span class="token keyword">const</span> <span class="token function-variable function">FadingRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> component<span class="token punctuation">:</span> Component<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Route <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>FadeIn<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>FaseIn<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>FadingRoute path<span class="token operator">=</span><span class="token string">&quot;/cool&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>children: func</strong><br>
有时候你可能只想知道访问地址是否被匹配，然后改变下别的东西，而不仅仅是对应的页面。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ListItemLink to<span class="token operator">=</span><span class="token string">&quot;/somewhere&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ListItemLink to<span class="token operator">=</span><span class="token string">&quot;/somewhere-ele&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ListItemLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> to<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span>to<span class="token punctuation">}</span> children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> match <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>li className<span class="token operator">=</span><span class="token punctuation">{</span>match <span class="token operator">?</span> <span class="token string">'active'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>to<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>path: string</strong><br>
任何可以被 path-to-regexp解析的有效 URL 路径</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/:id&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p>如果不给path，那么路由将总是匹配。</p></div> <p><strong>exact: bool</strong><br>
如果为 true，path 为 '/one' 的路由将不能匹配 '/one/two'，反之，亦然。
<strong>strict: bool</strong><br>
对路径末尾斜杠的匹配。如果为 true。path 为 '/one/' 将不能匹配 '/one' 但可以匹配 '/one/two'。</p> <div class="tip custom-block"><p>如果要确保路由没有末尾斜杠，那么 strict 和exact 都必须同时为 true</p></div> <h3 id="link"><a href="#link" aria-hidden="true" class="header-anchor">#</a> Link</h3> <p>为你的应用提供声明式，无障碍导航。<br> <strong>to: string</strong><br>
作用：跳转到指定路径<br>
使用场景：如果只是单纯的跳转就直接用字符串形式的路径。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/courses&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>to: object</strong><br>
作用：携带参数跳转到指定路径<br>
作用场景：比如你点击的这个链接将要跳转的页面需要展示此链接对应的内容，又比如这是个支付跳转，需要把商品的价格等信息传递过去。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
  pathname<span class="token punctuation">:</span> <span class="token string">'/course'</span><span class="token punctuation">,</span>
  search<span class="token punctuation">:</span> <span class="token string">'?sort=name'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span> price<span class="token punctuation">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>replace: bool</strong><br>
为 true 时，点击链接后将使用新地址替换掉上一次访问的地址，什么意思呢，比如：你依次访问 '/one' '/two' '/three' ’/four'  这四个地址，如果回退，将依次回退至 '/three' '/two' '/one' ，这符合我们的预期，假如我们把链接 '/three' 中的 replace 设为 true 时。依次点击 one two three four 然后再回退会发生什么呢？会依次退至 '/three' '/one'！</p> <h3 id="navlink"><a href="#navlink" aria-hidden="true" class="header-anchor">#</a> NavLink</h3> <p>这是<code>&lt;Link&gt;</code> 的特殊版，顾名思义这就是为页面导航准备的。因为导航需要有 “激活状态”。<br> <strong>activeClassName: string</strong><br>
导航选中激活时候应用的样式名，默认样式名为 active</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>NavLink
  to<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span>
  activeClassName<span class="token operator">=</span><span class="token string">&quot;selected&quot;</span>
<span class="token operator">&gt;</span>MyBlog<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>activeStyle: object</strong><br>
如果不想使用样式名就直接写style</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>NavLink
  to<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span>
  activeStyle<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> fontWeight<span class="token punctuation">:</span> <span class="token string">'bold'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span>MyBlog<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>xact: bool</strong><br>
若为 true，只有当访问地址严格匹配时激活样式才会应用
<strong>strict: bool</strong><br>
若为 true，只有当访问地址后缀斜杠严格匹配（有或无）时激活样式才会应用
<strong>isActive: func</strong><br>
决定导航是否激活，或者在导航激活时候做点别的事情。不管怎样，它不能决定对应页面是否可以渲染。</p> <h3 id="switch"><a href="#switch" aria-hidden="true" class="header-anchor">#</a> Switch</h3> <p>只渲染出第一个与当前访问地址匹配的 <code>&lt;Route&gt;</code>或 <code>&lt;Redirect&gt;</code>。<br>
思考如下代码，如果你访问 /about，那么组件 About User Nomatch 都将被渲染出来，因为他们对应的路由与访问的地址 /about 匹配。这显然不是我们想要的，我们只想渲染出第一个匹配的路由就可以了，于是<code>&lt;Switch&gt;</code>应运而生！</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/:user&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>NoMatch<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也许你会问，为什么 RR4 机制里不默认匹配第一个符合要求的呢，答：这种设计允许我们将多个<code>&lt;Route&gt;</code>组合到应用程序中，例如侧边栏（sidebars），面包屑 等等。
另外，<code>&lt;Switch&gt;</code> 对于转场动画也非常适用，因为被渲染的路由和前一个被渲染的路由处于同一个节点位置！</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Fade<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* 用了Switch 这里每次只匹配一个路由，所有只有一个节点。 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Route<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Fade<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>Fade<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token comment">/* 不用 Switch 这里可能就会匹配多个路由了，即便匹配不到，也会返回一个null，使动画计算增加了一些麻烦。 */</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Fade<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>children: node</strong><br> <code>&lt;Switch&gt;</code>下的子节点只能是 <code>&lt;Route&gt;</code> 或 <code>&lt;Redirect&gt;</code> 元素。只有与当前访问地址匹配的第一个子节点才会被渲染。<code>&lt;Route&gt;</code> 元素用它们的 path 属性匹配，<code>&lt;Redirect&gt;</code> 元素使用它们的 from 属性匹配。如果没有对应的 path 或 from，那么它们将匹配任何当前访问地址。</p> <h3 id="redirect"><a href="#redirect" aria-hidden="true" class="header-anchor">#</a> Redirect</h3> <p><code>&lt;Redirect&gt;</code>渲染时将导航到一个新地址，这个新地址覆盖在访问历史信息里面的本该访问的那个地址。<br> <strong>to: string</strong><br>
重定向的 URL 字符串<br> <strong>to: object</strong><br>
重定向的 location 对象<br> <strong>push: bool</strong><br>
若为真，重定向操作将会把新地址加入到访问历史记录里面，并且无法回退到前面的页面。<br> <strong>from: string</strong><br>
需要匹配的将要被重定向路径。</p> <h3 id="prompt"><a href="#prompt" aria-hidden="true" class="header-anchor">#</a> Prompt</h3> <p>当用户离开当前页面前做出一些提示。<br> <strong>message: string</strong><br>
当用户离开当前页面时，设置的提示信息。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Prompt message<span class="token operator">=</span><span class="token string">&quot;确定要离开？&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>message: func</strong><br>
当用户离开当前页面时，设置的回掉函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Prompt message<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">location</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Are you sue you want to go to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>location<span class="token punctuation">.</span>pathname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token template-punctuation string">`</span></span> 
<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>when: bool</strong><br>
通过设置一定条件要决定是否启用 Prompt</p> <h3 id="history"><a href="#history" aria-hidden="true" class="header-anchor">#</a> history</h3> <p>histoty 是 RR4 的两大重要依赖之一（另一个当然是 React 了），在不同的 javascript 环境中， history 以多种能够行驶实现了对会话（session）历史的管理。<br>
我们会经常使用以下术语：</p> <ul><li>&quot;browser history&quot; - history 在 DOM 上的实现，用于支持 HTML5 history API 的浏览器</li> <li>&quot;hash history&quot; - history 在 DOM 上的实现，用于旧版浏览器。</li> <li>&quot;memory history&quot; - history 在内存上的实现，用于测试或非 DOM 环境（例如 React Native）。</li></ul> <p>history 对象通常具有以下属性和方法：</p> <ul><li>length: number  浏览历史堆栈中的条目数</li> <li>action: string 路由跳转到当前页面执行的动作，分为 PUSH, REPLACE, POP</li> <li>location: object 当前访问地址信息组成的对象，具有如下属性：</li> <li>pathname: string URL路径</li> <li>search: string URL中的查询字符串</li> <li>hash: string URL的 hash 片段</li> <li>state: string 例如执行 push(path, state) 操作时，location 的 state 将被提供到堆栈信息里，state 只有在 browser 和 memory history 有效。</li> <li>push(path, [state]) 在历史堆栈信息里加入一个新条目。</li> <li>replace(path, [state]) 在历史堆栈信息里替换掉当前的条目</li> <li>go(n) 将 history 堆栈中的指针向前移动 n。</li> <li>goBack() 等同于 go(-1)</li> <li>goForward 等同于 go(1)</li> <li>block(prompt) 阻止跳转</li></ul> <p>history 对象是可变的，因为建议从 <code>&lt;Route&gt;</code> 的 prop 里来获取 location，而不是从 history.location 直接获取。这样可以保证 React 在生命周期中的钩子函数正常执行，例如以下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Comp</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// locationChanged</span>
    <span class="token keyword">const</span> locationChanged <span class="token operator">=</span> nextProps<span class="token punctuation">.</span>location <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location

    <span class="token comment">// 错误方式，locationChanged 永远为 false，因为history 是可变的</span>
    <span class="token keyword">const</span> locationChanged <span class="token operator">=</span> nextProps<span class="token punctuation">.</span>history<span class="token punctuation">.</span>location <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span>location
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="location"><a href="#location" aria-hidden="true" class="header-anchor">#</a> location</h3> <p>location 是指你当前的位置，将要去的位置，或是之前所在的位置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  key<span class="token punctuation">:</span> <span class="token string">'sdfad1'</span>
  pathname<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
  search<span class="token punctuation">:</span> <span class="token string">'?name=minooo'</span>
  hash<span class="token punctuation">:</span> <span class="token string">'#sdfas'</span><span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    price<span class="token punctuation">:</span> <span class="token number">123</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在以下情境中可以获取 location 对象</p> <ul><li>在 Route component 中，以 this.props.location 获取</li> <li>在 Route render 中，以 ({location}) =&gt; () 方式获取</li> <li>在 Route children 中，以 ({location}) =&gt; () 方式获取</li> <li>在 withRouter 中，以 this.props.location 的方式获取</li></ul> <p>location 对象不会发生改变，因此可以在生命周期的回调函数中使用 location 对象来查看当前页面的访问地址是否发生改变。这种技巧在获取远程数据以及使用动画时非常有用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>location <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 已经跳转了！</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以在不同情境中使用 location：</p> <ul><li><code>&lt;Link to={location} /&gt;</code></li> <li><code>&lt;NaviveLink to={location} /&gt;</code></li> <li><code>&lt;Redirect to={location /&gt;</code></li> <li>history.push(location)</li> <li>history.replace(location)</li></ul> <h3 id="match"><a href="#match" aria-hidden="true" class="header-anchor">#</a> match</h3> <p>match 对象包含了 <code>&lt;Route path&gt;</code> 如何与 URL 匹配的信息，具有以下属性：</p> <ul><li>params: object 路径参数，通过解析 URL 中的动态部分获得键值对</li> <li>isExact: bool 为 true 时，整个 URL 都需要匹配</li> <li>path: string 用来匹配的路径模式，用于创建嵌套的 <code>&lt;Route&gt;</code></li> <li>url: string URL 匹配的部分，用于嵌套的<code>&lt;Link&gt;</code></li></ul> <p>在以下情境中可以获取 match 对象</p> <ul><li>在 Route component 中，以 this.props.match获取</li> <li>在 Route render 中，以 ({match}) =&gt; () 方式获取</li> <li>在 Route children 中，以 ({match}) =&gt; () 方式获取</li> <li>在 withRouter 中，以 this.props.match的方式获取</li> <li>matchPath 的返回值</li></ul> <div class="tip custom-block"><p>当一个 Route 没有 path 时，它会匹配一切路径。</p></div> <h2 id="脚手架"><a href="#脚手架" aria-hidden="true" class="header-anchor">#</a> 脚手架</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>npx create-react-app reactdemo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="文件结构"><a href="#文件结构" aria-hidden="true" class="header-anchor">#</a> 文件结构</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>/  --  根目录
  --  public/  --  公共资源目录
  ----  api/  --  mock数据目录
  --  src/  --  项目目录
  ----  common/  --  通用组件目录
  ----  pages/  --  页面组件目录
  ------  home/  --  首页目录
  --------  store/  --  组件的redux仓库
  ----------  actionCreators.js  --  创建redux的action
  ----------  constains.js  --  定义action常量
  ----------  index.js  --  组件redux对外的统一接口
  ----------  reducer.js  --  状态处理
  --------  index.js  --  组件
  --------  style.js  --  组件样式
  ------  statics/  --  静态资源目录
  ------  store/  --  项目redux仓库
  --------  index.js  --  创建store
  --------  reducer.js  --  组合各组件store
  ------  App.js  --  项目入口
  ------  index.js  --  挂载App
  ------  style.js  --  全局样式
  ----  package.json  --  打包依赖
  ----  README.md
  ----  yarn-error.log
  ----  yarn.lock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="react-app-rewired"><a href="#react-app-rewired" aria-hidden="true" class="header-anchor">#</a> react-app-rewired</h3> <p>react-app-rewired 是 react 社区开源的一个修改 CRA 配置的工具。<br>
在 CRA 创建的项目中安装了react-app-rewired( npm install react-app-rewired --save-dev )后，可以通过创建一个config-overrides.js 文件来对 webpack 配置进行扩展。因此react-app-rewired不兼容CRA2了，但可以使用customize-cra来兼容CRA2。作者还推荐使用next.js或Razzle脚手架，它们都支持开箱即用的自定义Webpack,有空时后面在介绍这两种使用。</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install react-app-rewired --save-dev
npm install customize-cra --save-dev
npm install --save-dev @babel/plugin-proposal-decorators
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们在根目录新建一个config-overrides.js 文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
  override<span class="token punctuation">,</span>
  addLessLoader<span class="token punctuation">,</span>
  addDecoratorsLegacy<span class="token punctuation">,</span>
  disableEsLint<span class="token punctuation">,</span>
  useBabelRc<span class="token punctuation">,</span>
  addWebpackAlias
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'customize-cra'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>
  <span class="token comment">//添加修饰器 根目录下创建.babelrc</span>
  <span class="token function">useBabelRc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">//禁用默认eslint，使用自定义eslint,根目录下创建.eslintrc.js</span>
  <span class="token function">disableEsLint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">//在传统模式下添加装饰器。一定要@babel/plugin-proposal-decorators安装</span>
  <span class="token function">addDecoratorsLegacy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">//添加less-loader配置</span>
  <span class="token function">addLessLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">//配置简化路径</span>
  <span class="token function">addWebpackAlias</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      <span class="token string">'@style'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/style'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'@api'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/api'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'@resource'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/resource'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'@components'</span><span class="token punctuation">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/components'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'@config'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/config'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'@pages'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/pages'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'@utils'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/utils'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>package.json</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;set PORT=5555 &amp;&amp; react-app-rewired start&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-app-rewired build&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-app-rewired test&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eject&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-scripts eject&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="安装antd"><a href="#安装antd" aria-hidden="true" class="header-anchor">#</a> 安装antd</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install antd -save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>按需引用antd模块，使用 babel-plugin-import（推荐）</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install babel-plugin-import --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改配置文件 .babelrc</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&quot;libraryName&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;libraryDirectory&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;style&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;css&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token comment">// `style: true` 会加载 less 文件</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="安装react-router"><a href="#安装react-router" aria-hidden="true" class="header-anchor">#</a> 安装react-router</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install --save react-router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="安装react-router-dom"><a href="#安装react-router-dom" aria-hidden="true" class="header-anchor">#</a> 安装react-router-dom</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install --save react-router-dom
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="安装axios"><a href="#安装axios" aria-hidden="true" class="header-anchor">#</a> 安装axios</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install --save axios
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="npm-run-build-遇到的问题"><a href="#npm-run-build-遇到的问题" aria-hidden="true" class="header-anchor">#</a> npm run build 遇到的问题</h3> <p>打包后打开index.html页面空白报错，原因是访问路径不对，我需要设置在根目录下，在package.json下添加&quot;homepage&quot;: &quot;.&quot;。<br>
包体积过大，里面包含了.map文件，启动了sourcemap，因此每次打包都会产生.map文件。我们可以在命令行中去掉他，“scripts”添加GENERATE_SOURCEMAP=false</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;cross-env REACT_APP_ENV=development react-app-rewired start&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;cross-env GENERATE_SOURCEMAP=false REACT_APP_ENV=production react-app-rewired build&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-app-rewired test&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eject&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-scripts eject&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test1&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;cross-env GENERATE_SOURCEMAP=false REACT_APP_ENV=test1 react-app-rewired build&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test2&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;cross-env REACT_APP_ENV=test2 react-app-rewired build&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="pwa-渐进式web应用"><a href="#pwa-渐进式web应用" aria-hidden="true" class="header-anchor">#</a> PWA(渐进式web应用)</h3> <p>Progressive Web App简称 PWA，是提升 Web App 的体验的一种新方法，能给用户原生应用的体验。<br>
我们可以看到在src文件夹下有个registerServiceWorker.js，这文件其实就是注册 service worker，它是在后台运行的一个线程，可以用来处理离线缓存、消息推送、后台自动更新等任务。这样你下次访问时，就可以更快的获取资源。而且因为资源离线缓存，因此在离线或者网络较差的情况下也正常访问。注意，registerServiceWorker注册的service worker 只在生产环境中生效（process.env.NODE_ENV === 'production'）,还有必须是hppts服务 。如果我们想要使用cra2提供的pwa特性的话，在build前将src/index.js下的serviceWorker.unregister() 改成serviceWorker.register()注册service worker。<br>
在public文件夹中有个manifest.json文件。PWA 添加至桌面的功能实现依赖于 manifest.json，manifest.json用于指定应用的显示名称、图标、应用入口文件地址及需要使用的设备权限等信息。也就是说用户可以直接将站点添加快捷方式到桌面，免去去应用商店下载的麻烦。<br>
在没网和网弱的状态下也能读取到资源还能瞬间秒开，还能实现消息通知，添加应用横屏等等，还能将站点添加成快捷键放到桌面。使用PWA是不是感觉更像是原生app了。</p> <h3 id="react-loadable-按需加载"><a href="#react-loadable-按需加载" aria-hidden="true" class="header-anchor">#</a> react-loadable 按需加载</h3> <p>loadable组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Loadable <span class="token keyword">from</span> <span class="token string">'react-loadable'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'../style/load.styl'</span>
<span class="token comment">// 按需加载组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">withLoadable</span> <span class="token punctuation">(</span><span class="token parameter">comp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span>comp<span class="token punctuation">,</span>
    <span class="token function-variable function">loading</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> msg
      <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>加载错误，请刷新<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>timedOut<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>加载超时<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>pastDelay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'loading-mask'</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'container'</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>img className<span class="token operator">=</span><span class="token string">'loading-img'</span> src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../assets/img/loading.gif'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    timeout<span class="token punctuation">:</span><span class="token number">10000</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>类似vue的路由</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Loadable <span class="token keyword">from</span> <span class="token string">'./loadable'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    exact<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/app'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/app/docs'</span><span class="token punctuation">,</span>
        component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/docs'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            path<span class="token punctuation">:</span> <span class="token string">'/app/docs/docs1'</span><span class="token punctuation">,</span>
            component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/three'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/test'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> routes

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>主要路由配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>BrowserRouter<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Provider<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>hot<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-hot-loader'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Store <span class="token keyword">from</span> <span class="token string">'../redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> DevTools <span class="token keyword">from</span> <span class="token string">'../redux/DevTools'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> routes <span class="token keyword">from</span> <span class="token string">'./config'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Router</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>component<span class="token punctuation">:</span> Component<span class="token punctuation">,</span> children<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route
        <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span>
        render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Component<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">creatRouter</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> r<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Router exact<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>exact<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>path<span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>component<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token function">creatRouter</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>Router exact<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>exact<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>path<span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>route<span class="token punctuation">.</span>component<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Root</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>Store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;router-content&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/*{__DEVELOPMENT__ &amp;&amp; &lt;DevTools /&gt;}*/</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>DevTools <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span><span class="token function">creatRouter</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">hot</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">(</span>Root<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2019-10-25 11:34:43 AM</span></div></footer> <!----> </main> <div class="valine-wrapper" data-v-355bf788><div id="valine" data-v-355bf788></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-f9458a92 data-v-f9458a92><i class="iconfont reco-up" data-v-f9458a92></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8b298d71.js" defer></script><script src="/assets/js/3.1047f7fc.js" defer></script><script src="/assets/js/1.e9036eeb.js" defer></script><script src="/assets/js/15.90e4a351.js" defer></script>
  </body>
</html>
